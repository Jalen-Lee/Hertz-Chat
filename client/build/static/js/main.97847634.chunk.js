(this["webpackJsonpzeta-chat"]=this["webpackJsonpzeta-chat"]||[]).push([[0],{248:function(e,t,n){},275:function(e,t,n){},276:function(e,t,n){},277:function(e,t,n){},278:function(e,t,n){},279:function(e,t,n){},280:function(e,t,n){},283:function(e,t,n){},284:function(e,t,n){},285:function(e,t,n){},286:function(e,t,n){},287:function(e,t,n){},356:function(e,t,n){},358:function(e,t,n){},359:function(e,t,n){},360:function(e,t,n){},362:function(e,t,n){},364:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(25),s=n.n(a),i=n(26),o=n(9),r=n(430),l=n(432),j=n(423),u=(n(248),n(1));function d(e){var t=e.id,n=e.title,c=e.isActive,a=e.onClick,s=e.children;return Object(u.jsx)(j.a,{title:n,arrow:!0,placement:"left",children:Object(u.jsx)("div",{id:t,className:c?"nav-tab-item active":"nav-tab-item",onClick:function(e){return a(e,t)},children:s})})}var b=n(206),h=n.n(b),O=n(207),m=n.n(O),p=n(208),f=n.n(p),v=n(21),x=n(22),g=n(23),N=new(function(){function e(){Object(v.a)(this,e),this.userinfo=void 0,this.conversations=[],this.friendsList=[],this.groupsList=[],Object(g.d)(this,{},{autoBind:!0})}return Object(x.a)(e,[{key:"setConversations",value:function(e){this.conversations=e}},{key:"setFriendsList",value:function(e){this.friendsList=e}},{key:"setGroupsList",value:function(e){this.groupsList=e}}]),e}()),S=n(36),C=n.n(S),_=n(67),y=n(198),k=n.n(y),A=n(223),T="hertz_token";function E(){return localStorage.getItem(T)||""}function I(e){localStorage.setItem(T,e)}var w=k.a.create({baseURL:"http://localhost:9527",timeout:3e3}),L=new Set(["/auth/login","/auth/signup","/auth/checkToken"]);w.interceptors.request.use((function(e){if(console.group("http\u8bf7\u6c42:".concat(e.url)),console.log("\u8bf7\u6c42config",e),e.url&&!L.has(e.url)){var t=E();e.headers.Authorization="Bearer ".concat(t),console.log("\u643a\u5e26token",t)}else console.log("\u4e0d\u643a\u5e26token");return console.groupEnd(),e}),(function(e){return console.group("http\u8bf7\u6c42\u9519\u8bef\uff0c\u672a\u53d1\u51fa"),console.log(e),A.a.error({message:"\u8bf7\u6c42\u9519\u8bef",description:e.toString()}),console.groupEnd(),Promise.reject(e)})),w.interceptors.response.use((function(e){return console.group("http\u54cd\u5e94:".concat(e.config.url)),console.log("\u54cd\u5e94\u4f53",e),console.log("\u6570\u636e",e.data),console.groupEnd(),A.a.success({message:"\u54cd\u5e94\u8fd4\u56de",description:JSON.stringify(e.data,null,"\n")}),Promise.resolve(e.data)}),(function(e){return console.group("http\u54cd\u5e94\u9519\u8bef"),console.log("\u54cd\u5e94\u4f53",e.response),console.log("\u9519\u8bef\u4f53",e),console.groupEnd(),A.a.error({message:"\u54cd\u5e94\u9519\u8bef",description:e.toString()}),Promise.reject(e)}));var R=w;function D(e){return z.apply(this,arguments)}function z(){return(z=Object(_.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){R.post("/auth/login",t).then((function(t){e(t)})).catch((function(e){n(e)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return P.apply(this,arguments)}function P(){return(P=Object(_.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){R.post("/auth/signup",t).then((function(t){e(t)})).catch((function(e){n(e)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return new Promise((function(t,n){R.post("/auth/checkToken",e).then((function(e){t(e)})).catch((function(e){n(e)}))}))}var K,F=n(224);!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.UNKNOWN_ERROR=1]="UNKNOWN_ERROR",e[e.SERVICE_TEMPORARILY_UNAVAILABLE=3]="SERVICE_TEMPORARILY_UNAVAILABLE",e[e.INVALID_PARAMETER=100]="INVALID_PARAMETER",e[e.INVALID_API_KEY=101]="INVALID_API_KEY",e[e.INVALID_USER_INFO_FIELD=109]="INVALID_USER_INFO_FIELD",e[e.ACCESS_TOKEN_INVALID_OR_NO_LONGER_VALID=110]="ACCESS_TOKEN_INVALID_OR_NO_LONGER_VALID",e[e.ACCESS_TOKEN_EXPIRED=111]="ACCESS_TOKEN_EXPIRED",e[e.INVALID_CLIENT=10001]="INVALID_CLIENT"}(K||(K={}));var M=n(222),B=new(function(){function e(){Object(v.a)(this,e),this.socket=void 0,this.ws_url=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_URL:"http://localhost:9527"}).REACT_APP_WS_BASE_URL,Object(g.d)(this,{},{autoBind:!0})}return Object(x.a)(e,[{key:"onFirstLoad",value:function(e){console.group("ws:server.first-load"),console.log("payload",e),N.setConversations(e.conversations),console.groupEnd()}},{key:"socketInit",value:function(){this.socket=Object(M.a)(this.ws_url,{autoConnect:!1}),this.socket.on("connect",(function(){console.log("socket \u5df2\u8fde\u63a5")})),this.socket.on("server.first-load",this.onFirstLoad)}},{key:"socketConnect",value:function(){var e;this.socket.auth={uid:N.userinfo.uid},null===(e=this.socket)||void 0===e||e.connect()}},{key:"socketDisconnect",value:function(){var e;null===(e=this.socket)||void 0===e||e.disconnect()}},{key:"isSocketConnected",get:function(){var e;return null===(e=this.socket)||void 0===e?void 0:e.disconnected}}]),e}()),H=new(function(){function e(){Object(v.a)(this,e),this.token="",this.hasLogin=!1,Object(g.d)(this,{},{autoBind:!0})}return Object(x.a)(e,[{key:"initTokenFromLocal",value:function(e){this.token=e}},{key:"signInAsync",value:function(e){var t=this;Object(g.g)(Object(_.a)(C.a.mark((function n(){var c,a,s;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,D(e);case 3:c=n.sent,a=c.code,s=c.data,c.err_msg,a===K.SUCCESS?(N.userinfo=s.userinfo,t.token=s.token,I(s.token),F.b.success("\u767b\u5f55\u6210\u529f!"),B.socketConnect(),t.hasLogin=!0):F.b.success("\u767b\u5f55\u5931\u8d25\uff0c".concat(s.msg)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),F.b.error("\u767b\u5f55\u5931\u8d25\uff0c".concat(n.t0.message));case 13:case"end":return n.stop()}}),n,null,[[0,10]])}))))}},{key:"signUpAsync",value:function(e){var t=this;Object(g.g)(Object(_.a)(C.a.mark((function n(){var c,a,s;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,V(e);case 3:c=n.sent,a=c.code,s=c.data,c.err_msg,a===K.SUCCESS?(t.token=s.data.token,I(s.token),N.userinfo=s.userinfo,F.b.success("\u8d26\u53f7\u6ce8\u518c\u6210\u529f\uff01"),B.socketConnect(),t.hasLogin=!0):F.b.error("\u8d26\u53f7\u6ce8\u518c\u5931\u8d25\uff01\uff0c".concat(s.msg)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),F.b.error("\u8d26\u53f7\u6ce8\u518c\u5931\u8d25\uff0c".concat(n.t0.message));case 13:case"end":return n.stop()}}),n,null,[[0,10]])}))))}},{key:"checkTokenAsync",value:function(){var e=this;try{Object(g.g)(Object(_.a)(C.a.mark((function t(){var n,c,a;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U({token:e.token});case 2:n=t.sent,c=n.code,a=n.data,n.err_msg,c===K.SUCCESS?(N.userinfo=a.userinfo,F.b.success("\u6b22\u8fce\u518d\u6b21\u767b\u5f55\uff01"),B.socketConnect(),e.hasLogin=!0):(e.token="",localStorage.removeItem(T),F.b.error("\u8eab\u4efd\u4fe1\u606f\u5df2\u5931\u6548\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55"));case 7:case"end":return t.stop()}}),t)}))))}catch(t){F.b.error("token\u6821\u9a8c\u5931\u8d25\uff0c".concat(t.message))}}},{key:"logOutAsync",value:function(){}}]),e}()),G=new(function(){function e(){Object(v.a)(this,e),this.appName="Hertz Chat",this.author="Jaylen Lee",this.version="1.0.0",this.appConfig={isRememberAccount:!1,rememberAccount:""},this.userStore=N,this.authStore=H,this.chatStore=B,Object(g.d)(this,{userStore:!1,authStore:!1,chatStore:!1},{autoBind:!0})}return Object(x.a)(e,[{key:"setAppConfig",value:function(e){this.appConfig=e}},{key:"appInit",value:function(){console.log("appInit"),this.setAppConfig(JSON.parse(localStorage.getItem("hertz_config")||"{}")),console.log(this.appConfig);var e=E();this.authStore.initTokenFromLocal(e)}}]),e}()),J=Object(c.createContext)(G);function W(){return Object(c.useContext)(J)}var q;n(275);!function(e){e.CONVERSATIONS_LIST="conversations-list",e.CONTACTS_LIST="contacts-list",e.CHAT_SETTING="chat-setting"}(q||(q={}));var Y=Object(i.a)((function(e){var t=e.tabChange,n=Object(c.useState)(q.CONVERSATIONS_LIST),a=Object(o.a)(n,2),s=a[0],i=a[1],r=W().userStore;function j(e,n){console.log("\u70b9\u51fbnavTabItem",n),i(n),t(n)}return Object(u.jsxs)("nav",{className:"chat-layout-navigation-container",children:[Object(u.jsx)("div",{className:"profile",children:Object(u.jsx)(l.a,{src:r.userinfo&&r.userinfo.avatar,alt:r.userinfo&&r.userinfo.username,style:{width:"50px",height:"50px"}})}),Object(u.jsxs)("div",{className:"tabs-list",children:[Object(u.jsxs)("div",{className:"row-1",children:[Object(u.jsx)(d,{id:q.CONVERSATIONS_LIST,title:"\u4f1a\u8bdd\u5217\u8868",onClick:j,isActive:s===q.CONVERSATIONS_LIST,children:Object(u.jsx)(h.a,{fontSize:"large"})}),Object(u.jsx)(d,{id:q.CONTACTS_LIST,title:"\u597d\u53cb\u5217\u8868",onClick:j,isActive:s===q.CONTACTS_LIST,children:Object(u.jsx)(m.a,{fontSize:"large"})})]}),Object(u.jsx)("div",{className:"row-2",children:Object(u.jsx)(d,{id:q.CHAT_SETTING,title:"\u8bbe\u7f6e",onClick:j,isActive:s===q.CHAT_SETTING,children:Object(u.jsx)(f.a,{fontSize:"large"})})})]})]})})),X=(n(276),n(209)),Q=n.n(X),Z=n(210),$=n.n(Z),ee=(n(277),Object(i.a)((function(){var e=Object(c.useState)("0"),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(c.useRef)(null);return Object(u.jsxs)("div",{className:"conversation-search-container",children:[Object(u.jsx)("div",{className:"search-icon icon",children:Object(u.jsx)(Q.a,{})}),Object(u.jsx)("input",{type:"text",className:"input-area",placeholder:"\u641c\u7d22",ref:s,onChange:function(e){return function(e){var t=e.target.value;a(t)}(e)}}),Object(u.jsx)("div",{className:"clear-icon icon ".concat(n.length>0&&"show"),onClick:function(e){return s.current.value="",void a("")},children:Object(u.jsx)($.a,{fontSize:"small"})})]})}))),te=n(212),ne=n.n(te),ce=n(211),ae=n.n(ce);n(278);function se(e){var t=e.data,n=e.hasChoose,c=e.onChoose,a=e.onClose;return Object(u.jsxs)("div",{className:n?"conversation-item-container chosen":"conversation-item-container",onClick:function(e){return c(e,t)},children:[Object(u.jsx)("div",{className:"close-btn",onClick:function(e){e.stopPropagation(),a(e,t)},children:Object(u.jsx)(ae.a,{fontSize:"small"})}),Object(u.jsxs)("div",{className:"conversation-item-body",children:[Object(u.jsx)("div",{className:"conversation-item-body-avatar",children:Object(u.jsx)("img",{src:t.avatar,alt:t.name+"\u5934\u50cf"})}),Object(u.jsxs)("div",{className:"conversation-item-body-content",children:[Object(u.jsxs)("div",{className:"row-1",children:[Object(u.jsx)("div",{className:"name text-ellipsis",children:t.name}),Object(u.jsx)("div",{className:"unread-count"})]}),Object(u.jsxs)("div",{className:"row-2",children:[Object(u.jsx)("div",{className:"summary text-ellipsis",children:t.summary}),Object(u.jsx)("div",{className:"date",children:t.date})]})]})]})]})}var ie,oe,re=n(15),le=n.n(re),je=[{name:"David",avatar:"https://picsum.photos/id/409/200/200",summary:"\u4e2d\u56fd\u9646\u519b\u4e00\u4e2a\u70ae\u5175\u65c5\u5927\u698236\u95e8\u5c65\u5e26155\u69b4\u548c36\u95e8\u8f6e\u5f0f155\u69b4\uff0c36\u95e8300\u6beb\u7c73\u706b\u7bad\u70ae\uff0812\u7ba1\uff09",date:"2022-1-27"},{name:"Jaylenl",avatar:"https://picsum.photos/id/409/200/200",summary:"\u4e2d\u56fd\u9646\u519b\u4e00\u4e2a\u70ae\u5175\u65c5\u5927\u698236\u95e8\u5c65\u5e26155\u69b4\u548c36\u95e8\u8f6e\u5f0f155\u69b4\uff0c36\u95e8300\u6beb\u7c73\u706b\u7bad\u70ae\uff0812\u7ba1\uff09",date:"2022-1-27"}],ue=Object(i.a)((function(e){var t=e.conversationChange,n=e.isShow,a=Object(c.useState)(),s=Object(o.a)(a,2),i=s[0],r=s[1];function l(e,t){console.log("\u4ece\u4f1a\u8bdd\u5217\u8868\u4e2d\u5220\u9664\u4f1a\u8bdd",t)}function j(e,n){console.log("\u9009\u62e9\u4f1a\u8bdd",n),r(n),t(n)}return Object(u.jsxs)("div",{className:le()("conversation-list-container",{invisible:!n}),children:[Object(u.jsxs)("div",{className:"header",children:[Object(u.jsx)("div",{className:"search-bar",children:Object(u.jsx)(ee,{})}),Object(u.jsx)("div",{className:"join-btn",children:Object(u.jsx)(ne.a,{fontSize:"medium"})})]}),Object(u.jsx)("div",{className:"conversations-scroll-list",children:je.map((function(e){return Object(u.jsx)(se,{data:e,onChoose:j,onClose:l,hasChoose:i&&e.name===i.name},e.name)}))})]})})),de=(n(279),n(280),Object(i.a)((function(e){var t=e.info,n=e.onSelect;return console.log(n),Object(u.jsxs)("div",{className:"contacts-item",onClick:function(){return n(t)},children:[Object(u.jsx)("div",{className:"avatar",children:Object(u.jsx)("img",{src:t.icon,alt:t.name})}),Object(u.jsx)("div",{className:"name",children:t.name})]})}))),be=n(429),he=n(435),Oe=n(436),me=n(434),pe=n(168),fe=n.n(pe),ve={backgroundColor:"transparent",color:"#ffffff",border:"none",boxShadow:"none","&.Mui-expanded":{margin:0},"&:first-of-type":{borderRadius:0,border:"none"},"&:last-of-type":{borderRadius:0,border:"none"}},xe=Object(i.a)((function(e){var t=e.isShow,n=e.onContactChange;console.log(n);var a=W().userStore;console.log("userStore",a);var s=a.conversations;return Object(c.useEffect)((function(){}),[]),Object(u.jsxs)("div",{className:le()("friend-list-container",{invisible:!t}),children:[Object(u.jsxs)(be.a,{sx:ve,children:[Object(u.jsx)(he.a,{expandIcon:Object(u.jsx)(fe.a,{sx:{color:"#ffffff"}}),id:"panel1a-header",children:Object(u.jsx)(me.a,{children:"\u6211\u7684\u597d\u53cb"})}),Object(u.jsx)(Oe.a,{sx:{padding:0}})]}),Object(u.jsxs)(be.a,{sx:ve,children:[Object(u.jsx)(he.a,{expandIcon:Object(u.jsx)(fe.a,{sx:{color:"#ffffff"}}),id:"panel2a-header",children:Object(u.jsx)(me.a,{children:"\u6211\u7684\u7fa4\u804a"})}),Object(u.jsx)(Oe.a,{children:s.map((function(e){return Object(u.jsx)(de,{info:e,onSelect:n},e.id)}))})]})]})})),ge=(n(283),Object(i.a)((function(e){var t=e.currentTab,n=e.conversationChange,c=e.onContactChange;return Object(u.jsxs)("aside",{className:"chat-layout-sidebar-container",children:[Object(u.jsx)(ue,{conversationChange:n,isShow:t===q.CONVERSATIONS_LIST}),Object(u.jsx)(xe,{onContactChange:c,isShow:t===q.CONTACTS_LIST})]})}))),Ne=(n(284),n(3)),Se=n(105),Ce=(n(285),n.p+"static/media/no_data.c81309d3.png"),_e=n.p+"static/media/null_data.8a9160f0.png",ye=n.p+"static/media/no_msg.1768ddfb.png";!function(e){e.NO_DATA="no-data",e.NULL_DATA="null-data",e.NO_MSG="no-msg"}(oe||(oe={}));var ke=(ie={},Object(Ne.a)(ie,oe.NO_DATA,Ce),Object(Ne.a)(ie,oe.NULL_DATA,_e),Object(Ne.a)(ie,oe.NO_MSG,ye),ie);function Ae(e){if(e.custom)return Object(u.jsx)("div",{className:"empty-wrap",children:e.children});var t=e.type,n=e.image,c=e.imageStyle,a=e.description;return c=c||{height:"50%"},a=a||!1,t||n?t&&!n||t&&n?n=ke[t]:c={height:"auto"}:(t=oe.NO_DATA,n=ke[t]),Object(u.jsx)("div",{className:"empty-wrap",children:Object(u.jsx)(Se.a,{image:n,imageStyle:c,description:a})})}var Te=n(20),Ee=(n(286),n(419)),Ie=n(420),we=n(426),Le=(n(287),n(115)),Re=n.n(Le),De=n(213),ze=n.n(De);n(288);function Ve(e){var t=e.content;return Object(u.jsx)("span",{className:"message-body-text",children:t})}function Pe(e){return Object(u.jsx)("div",{className:"message-body",children:Object(u.jsx)(Ve,{content:e.content})})}Re.a.extend(ze.a),Re.a.locale("zh-cn");function Ue(e){var t=e.data,n=(t.id,t.chat_type),c=(t.msg_type,t.content),a=t.sender,s=t.post_date;return Object(u.jsx)("div",{className:"conversation-detail-message",children:Object(u.jsxs)("div",{className:le()("message-wrap ","666"===a.uid?"self":"opposite"),children:[Object(u.jsx)("div",{className:"message-sender",children:Object(u.jsx)(we.a,{src:a.avatar,shape:"square",size:50,draggable:!1})}),Object(u.jsxs)("div",{className:"message-content",children:[Object(u.jsx)("div",{className:le()("message-content-header",{invisible:"private"===n}),children:"jaylenl"}),Object(u.jsx)("div",{className:"message-content-main",children:Object(u.jsx)(Pe,{content:c})}),Object(u.jsx)("div",{className:"message-content-post-time",children:Object(u.jsx)("span",{children:Re()().fromNow(s)})})]}),Object(u.jsx)("div",{className:"message-status"})]})})}var Ke=n(226),Fe=(n(356),n(438)),Me=Object(Fe.a)({scriptUrl:"//at.alicdn.com/t/font_2877981_u38umvog3lm.js"}),Be=(n(357),function(e){var t=e.title,n=e.icon,c=e.onClick;return Object(u.jsx)(Ke.a,{title:t,children:Object(u.jsx)("div",{className:"input-bar-option-btn",onClick:c,children:Object(u.jsx)(Me,{type:n,style:{fontSize:"24px"}})})})});function He(e){var t=e.submit;console.log("EditArea\u6e32\u67d3");var n=Object(c.useRef)(null),a=Object(c.useState)(""),s=Object(o.a)(a,2),i=(s[0],s[1]);return Object(u.jsx)("pre",{id:"editArea",contentEditable:"true",onCompositionEnd:function(e){var t=n.current;console.log("\u6c49\u5b57\u8f93\u5165"),t&&i(t.innerText)},onInput:function(e){var t=n.current,c=e.nativeEvent;t&&!c.isComposing&&(console.log("\u5355\u8bcd\u8f93\u5165\u4e2d"),i(t.innerText))},onKeyDown:function(e){var c=e.key,a=e.ctrlKey,s=n.current;if(s)switch(c){case"Enter":if(e.preventDefault(),a){console.log("\u6362\u884c"),s.innerHTML+="<div><br/></div>";var i=s.lastChild,o=window.getSelection(),r=document.createRange();r.selectNodeContents(s),r.collapse(!1),r.setEndAfter(i),r.setStartAfter(i),null===o||void 0===o||o.removeAllRanges(),null===o||void 0===o||o.addRange(r),s.scrollTop=s.scrollHeight}else"\n"!==s.innerText&&(t(s.innerText),s.innerHTML="<div><br/></div>")}},onKeyUp:function(e){e.key,e.ctrlKey},ref:n,suppressContentEditableWarning:!0,children:Object(u.jsx)("div",{children:Object(u.jsx)("br",{})})})}function Ge(e){var t=e.onSubmit;return console.log("textbox\u6e32\u67d3"),Object(u.jsxs)("div",{className:"conversation-detail-textbox",children:[Object(u.jsxs)("div",{className:"input-bar-header",children:[Object(u.jsxs)("div",{className:"input-bar-header-left",children:[Object(u.jsx)(Be,{title:"\u53d1\u8868\u60c5",icon:"icon-xiaolian",onClick:function(){F.b.info("\u529f\u80fd\u6b63\u5728\u5f00\u53d1\u4e2d~"),console.log("\u53d1\u9001\u8868\u60c5")}}),Object(u.jsx)(Be,{title:"\u53d1\u56fe\u7247",icon:"icon-tupian",onClick:function(){F.b.info("\u529f\u80fd\u6b63\u5728\u5f00\u53d1\u4e2d~"),console.log("\u53d1\u9001\u56fe\u7247")}}),Object(u.jsx)(Be,{title:"\u53d1\u6587\u4ef6",icon:"icon-file",onClick:function(){F.b.info("\u529f\u80fd\u6b63\u5728\u5f00\u53d1\u4e2d~"),console.log("\u53d1\u9001\u6587\u4ef6")}})]}),Object(u.jsx)("div",{className:"input-bar-header-right"})]}),Object(u.jsx)("div",{className:"input-bar-main",children:Object(u.jsx)(He,{submit:t})})]})}var Je=[{id:"001",chat_type:"private",msg_type:"text",content:"\u5bf9\u4e8e\u5b57\u7b26\u578b\u7684\u5934\u50cf\uff0c\u5f53\u5b57\u7b26\u4e32\u8f83\u957f\u65f6\uff0c\u5b57\u4f53\u5927\u5c0f\u53ef\u4ee5\u6839\u636e\u5934\u50cf\u5bbd\u5ea6\u81ea\u52a8\u8c03\u6574\u3002\u4e5f\u53ef\u4f7f\u7528 gap \u6765\u8bbe\u7f6e\u5b57\u7b26\u8ddd\u79bb\u5de6\u53f3\u4e24\u4fa7\u8fb9\u754c\u5355\u4f4d\u50cf\u7d20\u3002",sender:{uid:"001",name:"david",avatar:"https://pic2.zhimg.com/v2-e8240d5f2e9a3935d0b74f0c4d1e8c43_im.jpg"},post_date:new Date},{id:"002",chat_type:"private",msg_type:"text",content:"\u5bf9\u4e8e\u5b57\u7b26\u578b\u7684\u5934\u50cf\uff0c\u5f53\u5b57\u7b26\u4e32\u8f83\u957f\u65f6\uff0c\u5b57\u4f53\u5927\u5c0f\u53ef\u4ee5\u6839\u636e\u5934\u50cf\u5bbd\u5ea6\u81ea\u52a8\u8c03\u6574\u3002\u4e5f\u53ef\u4f7f\u7528 gap \u6765\u8bbe\u7f6e\u5b57\u7b26\u8ddd\u79bb\u5de6\u53f3\u4e24\u4fa7\u8fb9\u754c\u5355\u4f4d\u50cf\u7d20\u3002",sender:{uid:"002",name:"mike",avatar:"https://pic2.zhimg.com/v2-e8240d5f2e9a3935d0b74f0c4d1e8c43_im.jpg"},post_date:new Date},{id:"003",chat_type:"private",msg_type:"text",content:"\u5bf9\u4e8e\u5b57\u7b26\u578b\u7684\u5934\u50cf\uff0c\u5f53\u5b57\u7b26\u4e32\u8f83\u957f\u65f6\uff0c\u5b57\u4f53\u5927\u5c0f\u53ef\u4ee5\u6839\u636e\u5934\u50cf\u5bbd\u5ea6\u81ea\u52a8\u8c03\u6574\u3002\u4e5f\u53ef\u4f7f\u7528 gap \u6765\u8bbe\u7f6e\u5b57\u7b26\u8ddd\u79bb\u5de6\u53f3\u4e24\u4fa7\u8fb9\u754c\u5355\u4f4d\u50cf\u7d20\u3002",sender:{uid:"003",name:"john",avatar:"https://pic2.zhimg.com/v2-e8240d5f2e9a3935d0b74f0c4d1e8c43_im.jpg"},post_date:new Date}],We=Object(i.a)((function(e){var t=e.detail,n=t.name,a=t.avatar,s=Object(c.useState)(Je),i=Object(o.a)(s,2),r=i[0],l=i[1],j=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e=j.current;e&&(e.scrollTop=e.scrollHeight)}),[r]),Object(u.jsxs)("div",{className:"conversation-detail",children:[Object(u.jsxs)("header",{className:"header",children:[Object(u.jsx)("div",{className:"left",children:Object(u.jsx)("div",{className:"friend-name",children:n})}),Object(u.jsxs)("div",{className:"right",children:[Object(u.jsx)("div",{className:"video-call",children:Object(u.jsx)(Ee.a,{fontSize:"medium"})}),Object(u.jsx)("div",{className:"voice-call",children:Object(u.jsx)(Ie.a,{fontSize:"medium"})})]})]}),Object(u.jsx)("main",{className:"content",children:Object(u.jsxs)("div",{className:"msg-scroller",ref:j,children:[Object(u.jsx)("div",{className:"no-more",children:"\u6ca1\u6709\u66f4\u591a\u4e86"}),r.map((function(e){return Object(u.jsx)(Ue,{data:e},e.id)}))]})}),Object(u.jsx)("div",{className:"input-area",children:Object(u.jsx)(Ge,{onSubmit:function(e){0!==e.length&&(console.log("\u53d1\u9001\u6d88\u606f",e,e.length),l([].concat(Object(Te.a)(r),[{id:Date.now().toString(),chat_type:10*Math.random()>5?"private":"group",msg_type:"text",content:e,sender:{uid:10*Math.random()>5?"666":Date.now().toString(),name:"jaylenl",avatar:a},post_date:new Date}])))}})})]})})),qe=n(421),Ye=n(427),Xe=(n(358),function(e){return Object(u.jsx)("div",{className:"contacts-detail",children:Object(u.jsxs)("div",{className:"friend-detail",children:[Object(u.jsxs)("div",{className:"friend-detail-header",children:[Object(u.jsxs)("div",{className:"left",children:[Object(u.jsx)("div",{className:"name",children:Object(u.jsx)("span",{children:"\u674e\u4e91\u98de"})}),Object(u.jsx)("div",{className:"description",children:"\u8fd9\u662f\u4e00\u6bb5\u63cf\u8ff0"})]}),Object(u.jsx)("div",{className:"right",children:Object(u.jsx)(we.a,{src:"https://p3-passport.byteacctimg.com/img/user-avatar/8c81576e8b5fe3bb461ea2c8dd2e4f21~300x300.image",size:100,shape:"square"})})]}),Object(u.jsx)(qe.a,{}),Object(u.jsx)("div",{className:"friend-detail-main"}),Object(u.jsx)(qe.a,{}),Object(u.jsx)("div",{className:"friend-detail-footer",children:Object(u.jsx)(Ye.a,{type:"primary",size:"large",style:{letterSpacing:"2px"},children:"\u53d1\u6d88\u606f"})})]})})}),Qe=function(e){var t=e.data;return Object(u.jsx)("div",{className:"contacts-detail",children:Object(u.jsxs)("div",{className:"group-detail",children:[Object(u.jsxs)("div",{className:"group-detail-header",children:[Object(u.jsxs)("div",{className:"left",children:[Object(u.jsx)("div",{className:"name",children:Object(u.jsx)("span",{children:t.name})}),Object(u.jsx)("div",{className:"description",children:t.description})]}),Object(u.jsx)("div",{className:"right",children:Object(u.jsx)(we.a,{src:t.icon,size:100,shape:"square"})})]}),Object(u.jsx)(qe.a,{}),Object(u.jsx)("div",{className:"group-detail-main"}),Object(u.jsx)(qe.a,{}),Object(u.jsx)("div",{className:"group-detail-footer",children:Object(u.jsx)(Ye.a,{type:"primary",size:"large",style:{letterSpacing:"2px"},children:"\u53d1\u6d88\u606f"})})]})})},Ze=Object(i.a)((function(e){var t=e.data.type;return"friend"===t?Object(u.jsx)(Xe,{}):"group"===t?Object(u.jsx)(Qe,{data:e.data}):Object(u.jsx)(u.Fragment,{})}));function $e(e){return Object(u.jsx)("section",{className:"chat-layout-main-container",children:e})}var et=Object(i.a)((function(e){var t=e.currentConversation,n=e.currentTab,c=e.contact;return n===q.CONVERSATIONS_LIST?$e(t?Object(u.jsx)(We,{detail:t}):Object(u.jsx)(Ae,{type:oe.NO_MSG})):n===q.CONTACTS_LIST?$e(c?Object(u.jsx)(Ze,{data:c}):Object(u.jsx)(Ae,{type:oe.NO_MSG})):$e(Object(u.jsx)(Ae,{type:oe.NO_DATA}))}));n(359);function tt(){var e=Object(c.useState)(q.CONVERSATIONS_LIST),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(),i=Object(o.a)(s,2),l=i[0],j=i[1],d=Object(c.useState)(),b=Object(o.a)(d,2),h=b[0],O=b[1];return Object(u.jsxs)("div",{id:"chat-container",children:[Object(u.jsx)("div",{className:"bg"}),Object(u.jsx)("div",{className:"layout",children:Object(u.jsxs)(r.a,{container:!0,height:"100%",wrap:"nowrap",children:[Object(u.jsx)(r.a,{item:!0,width:"80px",children:Object(u.jsx)(Y,{tabChange:function(e){a(e)}})}),Object(u.jsx)(r.a,{item:!0,xs:3,children:Object(u.jsx)(ge,{currentTab:n,conversationChange:function(e){j(e),console.log("#11",e)},onContactChange:function(e){O(e),console.log("\u8054\u7cfb\u4eba\u53d8\u66f4",e)}})}),Object(u.jsx)(r.a,{item:!0,xs:!0,children:Object(u.jsx)(et,{currentConversation:l,currentTab:n,contact:h})})]})})]})}var nt=n(170),ct=n(424),at=n(431),st=n(433),it=n(428),ot=(n(360),Object(i.a)((function(){var e=W().appConfig,t=e.isRememberAccount,n=e.rememberAccount,a=Object(c.useState)(n),s=Object(o.a)(a,2),i=s[0],r=s[1],l=Object(c.useState)(""),j=Object(o.a)(l,2),d=j[0],b=j[1],h=Object(c.useState)(t),O=Object(o.a)(h,2),m=O[0],p=O[1],f=W().authStore;function v(){return(v=Object(_.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:localStorage.setItem("hertz_config",JSON.stringify(Object(nt.a)(Object(nt.a)({},e),{},{rememberAccount:i,isRememberAccount:m}))),f.signInAsync({account:i,password:d});case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){r(e.rememberAccount),p(e.isRememberAccount)}),[e]),Object(u.jsxs)("div",{className:"form-box",children:[Object(u.jsx)(ct.a,{label:"\u8d26\u53f7",margin:"normal",size:"small",value:i,onChange:function(e){return r(e.target.value)},style:{width:"320px",height:"40px"}}),Object(u.jsx)(ct.a,{label:"\u5bc6\u7801",margin:"normal",type:"password",size:"small",onChange:function(e){return b(e.target.value)},style:{width:"320px",height:"40px"}}),Object(u.jsx)("div",{className:"option",children:Object(u.jsx)(st.a,{control:Object(u.jsx)(it.a,{checked:m,onChange:function(e){return p(e.target.checked)}}),label:"\u8bb0\u4f4f\u8d26\u53f7"})}),Object(u.jsx)(at.a,{variant:"contained",style:{width:"320px",height:"40px"},onClick:function(){return v.apply(this,arguments)},children:"\u767b\u5f55"})]})}))),rt=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),i=Object(o.a)(s,2),r=i[0],l=i[1],j=Object(c.useState)(""),d=Object(o.a)(j,2),b=d[0],h=d[1],O=Object(c.useState)(""),m=Object(o.a)(O,2),p=m[0],f=m[1];function v(){return(v=Object(_.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b===p){e.next=3;break}return F.b.error("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4\uff01"),e.abrupt("return");case 3:H.signUpAsync({account:n,username:r,password:b});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.jsxs)("div",{className:"form-box",children:[Object(u.jsx)(ct.a,{label:"\u90ae\u7bb1",margin:"normal",size:"small",style:{width:"320px",height:"40px"},onChange:function(e){return a(e.target.value)}}),Object(u.jsx)(ct.a,{label:"\u7528\u6237\u540d",margin:"normal",size:"small",style:{width:"320px",height:"40px"},onChange:function(e){return l(e.target.value)}}),Object(u.jsx)(ct.a,{type:"password",label:"\u5bc6\u7801",margin:"normal",size:"small",style:{width:"320px",height:"40px"},onChange:function(e){return h(e.target.value)}}),Object(u.jsx)(ct.a,{type:"password",label:"\u91cd\u590d\u5bc6\u7801",margin:"normal",size:"small",style:{width:"320px",height:"40px"},onChange:function(e){return f(e.target.value)}}),Object(u.jsx)(at.a,{variant:"contained",style:{width:"320px",height:"40px"},onClick:function(){return v.apply(this,arguments)},children:"\u6ce8\u518c"})]})},lt=function(){return Object(u.jsx)("div",{})};function jt(e){var t=Object(c.useState)("signin"),n=Object(o.a)(t,2),a=n[0],s=n[1],i=(Object(c.useContext)(ut),{signin:Object(u.jsx)(ot,{}),signup:Object(u.jsx)(rt,{}),forget_password:Object(u.jsx)(lt,{})});return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"bg"}),Object(u.jsx)("div",{className:"entrance-container",children:Object(u.jsxs)("div",{className:"form-wrapper",children:[Object(u.jsxs)("div",{className:"top-row",children:[Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{})]}),Object(u.jsx)("div",{className:"logo",children:Object(u.jsx)("img",{src:"https://web.sdk.qcloud.com/im/demo/latest/img/logo.dc3be0d4.png",alt:"logo"})}),i[a],Object(u.jsx)(at.a,{variant:"text",onClick:function(){"signin"===a?s("signup"):("signup"===a||"change_password"===a)&&s("signin")},children:{signin:"\u6ca1\u6709\u8d26\u53f7\uff1f\u6ce8\u518c",signup:"\u5df2\u6709\u8d26\u53f7\uff1f\u767b\u5f55",forget_password:"\u8fd4\u56de\u767b\u5f55"}[a]})]})})]})}var ut=Object(c.createContext)({});var dt=Object(i.a)((function(){var e=W(),t=e.appInit,n=e.authStore,a=e.chatStore,s=n.hasLogin;return Object(c.useEffect)((function(){t(),a.socketInit(),n.token&&n.checkTokenAsync()}),[]),s?Object(u.jsx)(tt,{}):Object(u.jsx)(jt,{})}));n(361),n(362),n(363);s.a.render(Object(u.jsx)(dt,{}),document.getElementById("root"))}},[[364,1,2]]]);
//# sourceMappingURL=main.97847634.chunk.js.map